(function(){"use strict";var e={5995:function(e,t,r){var a=r(144);class s{constructor(){this._namespace={},this._groups={}}set(e,t){this._namespace[e]=t}has(e){return this._namespace.hasOwnProperty(e)}get(e){if(this.has(e))return this._namespace[e];console.warn(`the name:${e} is undefined`)}group(e,...t){let r=this._groups;if(!(t.length>0)){if(r.hasOwnProperty(e)){let t=[];return r[e].forEach((e=>{this._groups.hasOwnProperty(e)?t.push(...this.group(e)):t.push(e)})),Array.from(new Set(t))}return[]}if(this.has(e))throw`the group name:${e} is occupied`;r[e]=t}forEach(e){Object.entries(this._namespace).forEach((([t,r])=>e(r,t)))}retrieve(e,t){e.forEach((e=>{this._groups.hasOwnProperty(e)?this.group(e).map((e=>t(this.get(e),e))):this.has(e)&&t(this.get(e),e)}))}list(...e){let t=[];return this.retrieve(e,(e=>t.push(e))),t}map(...e){let t={};return this.retrieve(e,((e,r)=>t[r]=e)),t}delete(e){this._groups.hasOwnProperty(e)?delete this._groups[e]:this.has(e)&&delete this._namespace[e]}}const n=(e,t=!1)=>({configurable:!1,enumerable:t,writable:!1,value:e}),o="[object Array]",i="[object Object]",l="[object String]",u="[object Number]",c="[object Boolean]",h="[object Function]";let p=e=>Object.prototype.toString.call(e),m=(e,t)=>p(e)===t,d=e=>m(e,o),g=e=>m(e,i),f=e=>m(e,h),y=e=>m(e,l),v=e=>m(e,u),_=e=>m(e,c);var b={name:"globalEvent",init(e){e.store.set("globalEvent",{data(){return{globalEventHandlers:{}}},mounted(){let e=this.$options.eventHandlers;e&&Object.entries(e).forEach((([e,t])=>{y(t)&&(t=this[t]),f(t)&&this.$VueMixinsPack.dispatcher.$on(e,this.globalEventHandlers[e]=t.bind(this))}))},beforeDestroy(){Object.entries(this.globalEventHandlers).forEach((([e,t])=>this.$VueMixinsPack.dispatcher.$off(e,t)))}})}},w={Number:{toModel(e){return parseFloat(e)},toQueryString(e){return 0===e||e?e.toString():NaN}},Boolean:{toModel(e){return"0"!==e&&"false"!==e},toQueryString(e){return e?e.toString():"false"}},Array:{toModel(e){return e.split(",")},toQueryString(e){return e?e.join(","):""}},NumberArray:{toModel(e){return e.split(",").map((e=>parseFloat(e)))},toQueryString(e){return e.join(",")}}},$={name:"query",init(e){e.store.set("query",{data(){return{queryConverter:{},queryDefault:{},query:{}}},watch:{$route:"_handleRouteChange"},mounted(){this.$nextTick((()=>{let e=this.queryConverter;Object.entries(this.query).forEach((([t,r])=>{y(r)||e.hasOwnProperty(t)||(v(r)?e[t]=w.Number:_(r)?e[t]=w.Boolean:d(r)&&(e[t]=w.Array)),v(r)&&isNaN(r)&&(r=this.query[t]=""),this.queryDefault[t]=r})),this._handleRouteChange()}))},methods:{$locate(){this.$options.$beforeLocate&&this.$options.$beforeLocate.bind(this)(this.query,this.$route.params);let e={},t=this.queryConverter;Object.entries(this.query).forEach((([r,a])=>{t.hasOwnProperty(r)&&(a=t[r].toQueryString(a)),!a&&0!==a||""===a||(e[r]=String(a).replace(/(^\s*)|(\s*$)/g,""))})),this.$router.push({path:this.$route.path,query:e}).then((e=>{e.path||e.query||this._handleRouteChange()}))},_handleRouteChange(){let e={},t=this.queryConverter;Object.entries(this.$route.query).forEach((([r,a])=>{a=a.replace(/(^\s*)|(\s*$)/g,""),t.hasOwnProperty(r)&&(a=t[r].toModel(a)),e[r]=a})),Object.assign(this.query,this.queryDefault,e),this.$options.$routeChanged&&this.$options.$routeChanged.bind(this)(this.query,this.$route.params)}}})}},q=r(9669),S=r.n(q),O=r(129),x=r.n(O);const P=new s;class k{constructor(e){this.name=e.name,this.axios=S().create(e.config),e.init(this.axios),this.api=e.api}request(e,t,...r){if(!this.api.hasOwnProperty(t))throw`without api:${t} in service:${this.name} `;let a=this.api[t].bind(e)(...r),{query:s,form:n,method:o}=a;return s&&(a.params=s,delete a.query),n&&(a.data=x().stringify(n),delete a.form),o||(a.method=a.data?"post":"get"),this.axios.request(a)}}var E={name:"service",init(e){e.store.set("service",{methods:{$api(e,...t){return()=>this.$invoke(e,...t)},$invoke(e,...t){let[r,a]=e.split("/");return P.get(r).request(this,a,...t)}}})},add(e){e=new k(e),P.set(e.name,e)}};let j,N=!1;try{window.localStorage.setItem("___test","OK");const e=window.localStorage.getItem("___test");window.localStorage.removeItem("___test"),N="OK"===e}catch(Oe){N=!1}class C{constructor(e,t){t||(t=()=>({})),this.__default__=t,this.name=e,this.reload()}reload(){let e;return N&&(e=window.localStorage.getItem(this.name)),this.__cache__=e&&y(e)?JSON.parse(e):this.__default__(N),this}set(e,t,r=!1){this.__cache__[e]=t,r&&this.update()}has(e){return this.__cache__.hasOwnProperty(e)}get(e,t){return!this.__cache__.hasOwnProperty(e)&&t&&(this.__cache__[e]=t()),this.__cache__[e]}del(e,t=!1){delete this.__cache__[e],t&&this.update()}destroy(){this.__cache__={},N&&window.localStorage.removeItem(this.name)}update(){N&&window.localStorage.setItem(this.name,JSON.stringify(this.__cache__))}merge(e,t=!0,r=!0){Object.keys(e).filter((e=>t||!this.has(e))).forEach((t=>this.__cache__[t]=e[t])),r&&this.update()}}const D=new s,M=function(e,t){return D.has(e)||D.set(e,new C(e,t)),D.get(e)},T=function(...e){return 1===e.length?D.get(e[0]):D.map(...e)};var H={name:"localStorage",item:M,items:T,init(e){j||(j=t=>{let r=t.key,a=this.item(r);a&&e.dispatcher.$emit("localStorage:"+r,a.reload())},window.addEventListener("storage",j)),e.store.set("localStorage",{methods:{$localStorage:M,$localStorages:T}})},install(e){Object.defineProperty(e,"$localStorage",n(M)),Object.defineProperty(e,"$localStorages",n(T))}};const L=new s,z=new s,Z={version:"0.0.5",store:z,use(e,...t){let r=e.name;if(!r)throw"the plugin name is undefined";if(L.has(r))throw`the plugin name:${r} is occupied`;e.init&&e.init(Z,...t),L.set(r,e)},install(e,...t){let r=t.shift();r||(r=new e),Z.dispatcher=r,Object.defineProperty(e.prototype,"$VueMixinsPack",n(Z)),Object.defineProperty(e,"$VueMixinsPack",n(Z)),L.forEach((t=>t.install&&t.install(e,Z)))},plugin(...e){return 1===e.length?L.get(e[0]):L.map(...e)},preset(e,...t){z.group(e,...t)},mixin(e="default",t){let r=z.list(e);return t&&r.push(...t),r}};Z.use(b),Z.use(H),Z.use(E),Z.use($),Z.preset("default","globalEvent","localStorage","service","query");var U=Z;function A(e,t=100){let r;return()=>{clearTimeout(r),r=setTimeout(e,t)}}U.use({name:"domEvent",init(e){window.resizeHandler||(window.resizeHandler=A((()=>e.dispatcher.$emit("resize",{type:"window"})),200),window.addEventListener("resize",window.resizeHandler)),window.scrollHandler||(window.scrollHandler=()=>e.dispatcher.$emit("scroll"),window.addEventListener("scroll",window.scrollHandler))}}),U.store.set("data",{data(){return{loading:!1}},methods:{isNull(e){return null===e||""===e||void 0===e||e.length<=0},mergeValid(e,...t){return t.forEach((t=>Object.entries(t).forEach((([t,r])=>{""!==r&&null!==r&&void 0!==r&&(e[t]=r)})))),e},mergeArray(...e){let t,r=e.pop(),a=[],s={};if(f(r))t=r;else{if(!y(r))throw"mergeArray need prop name";t=e=>e[r]}return e.forEach((e=>{e.forEach((e=>{let r=t(e);s[r]||(s[r]=!0,a.push(e))}))})),a},operate({action:e,success:t,error:r,finished:a,cancel:s,confirm:n,prompt:o,notifySuccessTitle:i,notifyErrorTitle:l,dangerouslyUseHTMLString:u=!1,loading:c=!0}){let h=s=>{c&&(this.loading=!0),e(s).then((e=>{if(e.success){let{result:r,message:a}=e;t&&t(r,e),i&&this.$notify({title:i,dangerouslyUseHTMLString:u,message:a,type:"success"})}else r&&r(e),l&&this.$notify({title:l,dangerouslyUseHTMLString:u,message:e.message,type:"error"});return e})).catch((e=>{e.response||e.request||"Network Error"===e.message?("Network Error"===e.message&&(e.message="接口请求失败,数据未正常返回"),r&&r({success:!1,message:e.toString()}),l&&this.$notify({title:l,dangerouslyUseHTMLString:u,message:e.toString(),type:"error"})):console.error(e)})).finally((()=>{c&&(this.loading=!1),a&&a()}))};if(n){let e=g(n)?n:{message:n};e.hasOwnProperty("title")||(e.title="提示"),e.dangerouslyUseHTMLString=u,this.$confirm(e.message,e).then(h).catch(s||(e=>""))}else o?this.$prompt(o.message,o).then((e=>h(e))).catch(s||(e=>"")):h()}}}),U.preset("page","default","data"),U.plugin("service").add({name:"demo",config:{baseURL:"http://localhost:3000/api/test",timeout:5e3},init(e){e.interceptors.request.use((e=>e),(e=>Promise.reject(e))),e.interceptors.response.use((e=>{let{config:t,status:r,data:a}=e;if(e.data){let{code:r,result:a}=e.data,s=200===r;return t.pagination,{success:s,result:a}}return e}),(e=>Promise.reject(e)))},api:{list(){return{url:"/query",query:this.query,pagination:{page:1,size:10}}},create(e){return{url:"/form",form:e}},update(e){return{url:"/json",data:e}}}}),a["default"].use(U);var I=r(4720),V=r.n(I),J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"vmp-app"},[r("div",{staticClass:"vmp-header"},[e._m(0),r("div",[e._v("v"+e._s(e.$VueMixinsPack.version))])]),r("div",{staticClass:"vmp-main"},[r("div",{staticClass:"vmp-aside"},[r("router-link",{attrs:{"exact-active-class":"active",to:"/"}},[e._v("/")]),r("router-link",{attrs:{"exact-active-class":"active",to:"/query-service"}},[e._v("query & service")]),r("router-link",{attrs:{"exact-active-class":"active",to:"/local-storage"}},[e._v("local-storage")]),r("router-link",{attrs:{"exact-active-class":"active",to:"/global-event"}},[e._v("global-event")])],1),r("router-view",{staticClass:"vmp-content"})],1)])},Q=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{staticClass:"logo",attrs:{href:"/"}},[r("img",{attrs:{src:"logo.svg",alt:"vue logo"}}),r("span",[e._v("Vue Mixins Pack")])])}],R={name:"app"},F=R,B=r(1001),K=(0,B.Z)(F,J,Q,!1,null,"f032f0ca",null),G=K.exports,W=r(8345),X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div")},Y=[],ee={name:"vmp-main"},te=ee,re=(0,B.Z)(te,X,Y,!1,null,"30adc00e",null),ae=re.exports,se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{staticClass:"clearfix",attrs:{"label-position":"top"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"query.num"}},[r("el-input-number",{model:{value:e.query.num,callback:function(t){e.$set(e.query,"num",t)},expression:"query.num"}})],1)],1),r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"query.str"}},[r("el-input",{model:{value:e.query.str,callback:function(t){e.$set(e.query,"str",t)},expression:"query.str"}})],1)],1),r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"query.bool"}},[r("el-switch",{model:{value:e.query.bool,callback:function(t){e.$set(e.query,"bool",t)},expression:"query.bool"}})],1)],1),r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"query.arr"}},[r("el-select",{attrs:{multiple:""},model:{value:e.query.arr,callback:function(t){e.$set(e.query,"arr",t)},expression:"query.arr"}},e._l(e.query.arr,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:e.$locate}},[e._v("$locate")])],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"service response"}},[r("el-input",{attrs:{type:"textarea",value:e.response,readonly:"",rows:22}})],1)],1),r("el-col",{attrs:{span:4}},[r("div",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.request("list")}}},[e._v("service-query")])],1),r("div",{staticStyle:{margin:"10px 0"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.request("create")}}},[e._v("service-form")])],1),r("div",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.request("update")}}},[e._v("service-json")])],1)])],1)],1)},ne=[],oe={name:"query-demo",mixins:U.mixin("page"),data(){return{query:{num:NaN,str:"",bool:!1,arr:[0,"p","t",1,"o","n",5]},response:""}},mounted(){},$routeChanged(e,t){this.operate({action:this.$api("demo/list"),notifyErrorTitle:"error",success:e=>{this.response=JSON.stringify(e,null,4)},error:e=>{this.response=JSON.stringify(e,null,4)}})},methods:{request(e){this.$invoke(`demo/${e}`,this.query).then((e=>{this.response=JSON.stringify(e,null,4)})).catch((e=>{this.response=JSON.stringify(e,null,4)}))}}},ie=oe,le=(0,B.Z)(ie,se,ne,!1,null,"3b888734",null),ue=le.exports,ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{attrs:{gutter:20}},[r("el-form",{staticClass:"clearfix",attrs:{"label-position":"top"}},[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"localStorage.TestLocalData.PageData.testStr"}},[r("el-input",{model:{value:e.PageData.testStr,callback:function(t){e.$set(e.PageData,"testStr",t)},expression:"PageData.testStr"}})],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"localStorage.TestLocalData.PageData.testNum"}},[r("el-input-number",{model:{value:e.PageData.testNum,callback:function(t){e.$set(e.PageData,"testNum",t)},expression:"PageData.testNum"}})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:e.localStorageUpdate}},[e._v("update")])],1)],1)],1)},he=[],pe={name:"local-storage-demo",mixins:U.mixin("page"),data(){let e=this.$localStorage("TestLocalData",(()=>({PageData:{testStr:"testStr",testNum:123}})));return{localData:e,PageData:e.get("PageData")}},methods:{localStorageUpdate(){this.localData.update()}}},me=pe,de=(0,B.Z)(me,ce,he,!1,null,"bb41a364",null),ge=de.exports,fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v("I am listening window resize")])},ye=[],ve={name:"global-event-demo",mixins:U.mixin("page"),eventHandlers:{resize({type:e}){this.$message(`${e} resized`)}}},_e=ve,be=(0,B.Z)(_e,fe,ye,!1,null,"42c6d7bd",null),we=be.exports;const $e=W.Z.prototype.push;W.Z.prototype.push=function(e){return $e.call(this,e).catch((e=>e))},a["default"].use(W.Z);let qe=new W.Z({routes:[{name:"main",path:"/",component:ae},{name:"query",path:"/query-service",component:ue},{name:"local-storage",path:"/local-storage",component:ge},{name:"global-event",path:"/global-event",component:we}]});qe.beforeEach(((e,t,r)=>{r()}));var Se=qe;a["default"].use(V(),{size:"mini"}),new a["default"]({router:Se,render:e=>e(G)}).$mount("#app")}},t={};function r(a){var s=t[a];if(void 0!==s)return s.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,r),n.exports}r.m=e,function(){var e=[];r.O=function(t,a,s,n){if(!a){var o=1/0;for(c=0;c<e.length;c++){a=e[c][0],s=e[c][1],n=e[c][2];for(var i=!0,l=0;l<a.length;l++)(!1&n||o>=n)&&Object.keys(r.O).every((function(e){return r.O[e](a[l])}))?a.splice(l--,1):(i=!1,n<o&&(o=n));if(i){e.splice(c--,1);var u=s();void 0!==u&&(t=u)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[a,s,n]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={826:0};r.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,n,o=a[0],i=a[1],l=a[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(s in i)r.o(i,s)&&(r.m[s]=i[s]);if(l)var c=l(r)}for(t&&t(a);u<o.length;u++)n=o[u],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(c)},a=self["webpackChunkvue_mixins_pack"]=self["webpackChunkvue_mixins_pack"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(5995)}));a=r.O(a)})();
//# sourceMappingURL=index.e3fd458f.js.map